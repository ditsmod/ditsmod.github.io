"use strict";(self.webpackChunkditsmod_github_io=self.webpackChunkditsmod_github_io||[]).push([[827],{5782:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>l,contentTitle:()=>d,default:()=>p,frontMatter:()=>t,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"basic-components/providers-helper","title":"Providers helper","description":"This class simplifies the addition of providers to DI while simultaneously controlling their types. Since this class implements the so-called Iteration protocols, it facilitates the conversion of itself into an array (note the spread operator):","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/01-basic-components/12-providers-helper.md","sourceDirName":"01-basic-components","slug":"/basic-components/providers-helper","permalink":"/en/basic-components/providers-helper","draft":false,"unlisted":false,"editUrl":"https://github.com/ditsmod/ditsmod/edit/main/website/i18n/en/docusaurus-plugin-content-docs/current/01-basic-components/12-providers-helper.md","tags":[],"version":"current","sidebarPosition":12,"frontMatter":{"sidebar_position":12},"sidebar":"tutorialSidebar","previous":{"title":"HttpErrorHandler","permalink":"/en/basic-components/http-error-handler"},"next":{"title":"@ditsmod/rest","permalink":"/en/rest-application/rest-module"}}');var n=r(4848),i=r(8453);const t={sidebar_position:12},d="Providers helper",l={},c=[];function a(e){const s={a:"a",code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsxs)(s.h1,{id:"providers-helper",children:[(0,n.jsx)(s.code,{children:"Providers"})," helper"]})}),"\n",(0,n.jsxs)(s.p,{children:["This class simplifies the addition of providers to DI while simultaneously controlling their types. Since this class implements the so-called ",(0,n.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols",children:"Iteration protocols"}),", it facilitates the conversion of itself into an array (note the spread operator):"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-ts",metastring:"{9}",children:"import { Providers } from '@ditsmod/core';\nimport { restModule } from '@ditsmod/rest';\n// ...\n@restModule({\n  // ...\n  providersPerRou: [\n    Provider1,\n    Provider2,\n    ...new Providers().useValue<CorsOptions>(CorsOptions, { origin: 'https://example.com' }),\n    // ...\n  ],\n  // ...\n})\nexport class SomeModule {}\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Starting from v2.55, Ditsmod allows passing an instance of ",(0,n.jsx)(s.code,{children:"Providers"})," directly into the ",(0,n.jsx)(s.code,{children:"providersPer*"})," properties of the module or controller metadata:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-ts",children:"import { Providers } from '@ditsmod/core';\nimport { restModule } from '@ditsmod/rest';\n// ...\n@restModule({\n  // ...\n  providersPerRou: new Providers()\n    .passThrough(Provider1)\n    .passThrough(Provider2)\n    .useValue<CorsOptions>(CorsOptions, { origin: 'https://example.com' }),\n  // ...\n})\nexport class SomeModule {}\n"})}),"\n",(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.code,{children:"providers.passThrough()"})," method allows providers to be passed without type checking; it is intended for passing classes as providers."]}),"\n",(0,n.jsxs)(s.p,{children:["In addition, ",(0,n.jsx)(s.code,{children:"Providers"})," has a special method ",(0,n.jsx)(s.code,{children:"$if()"}),", which allows providers to be passed only if it receives a truthy value:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-ts",metastring:"{8}",children:"import { Providers } from '@ditsmod/core';\nimport { restModule } from '@ditsmod/rest';\n// ...\n@restModule({\n  // ...\n  providersPerRou: new Providers()\n    .passThrough(Provider1)\n    .$if(false)\n    .passThrough(Provider2)\n    .passThrough(Provider3),\n  // ...\n})\nexport class SomeModule {}\n"})}),"\n",(0,n.jsxs)(s.p,{children:["In this case, ",(0,n.jsx)(s.code,{children:"Provider2"})," will not be passed to DI, while ",(0,n.jsx)(s.code,{children:"Provider1"})," and ",(0,n.jsx)(s.code,{children:"Provider3"})," will be passed. That is, ",(0,n.jsx)(s.code,{children:"$if()"})," applies only to the first expression immediately following it."]}),"\n",(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.code,{children:"providers.$use()"})," method allows creating plugins (or middlewares) to extend the functionality of ",(0,n.jsx)(s.code,{children:"Providers"}),":"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-ts",metastring:"{2,11,21-22}",children:"class Plugin1 extends Providers {\n  method1() {\n    if (this.true) {\n      // ...\n    }\n    return this.self;\n  }\n}\n\nclass Plugin2 extends Providers {\n  method2() {\n    if (this.true) {\n      // ...\n    }\n    return this.self;\n  }\n}\n\nconst providers = [...new Providers()\n  .$use(Plugin1, Plugin2)\n  .method1()\n  .method2()\n  .useLogConfig({ level: 'trace' })\n  .useClass(SomeService, ExtendedService)];\n"})})]})}function p(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}},8453:(e,s,r)=>{r.d(s,{R:()=>t,x:()=>d});var o=r(6540);const n={},i=o.createContext(n);function t(e){const s=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:t(e.components),o.createElement(i.Provider,{value:s},e.children)}}}]);